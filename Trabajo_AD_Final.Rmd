---
title: Comparación de modelos predictivos de indicadores de rendimiento
  logístico
author: "Corresponding_Author Hugo F. Tapia <hftpia@gmail.com>"
date: "`r Sys.Date()`"
bibliography: referencias.bib
output:
  html_document:
    toc: true
    toc_depth: 5
    toc_float: true
    code_folding: hide
    code_download: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


## White paper: Comparación de modelos predictivos de indicadores de rendimiento logístico
### Autores:   Hugo F. Tapia [1]
### Filiación: Instituto de Ingeniería Industrial - Facultad de Ingeniería - UNCuyo
### Contacto: hftapia@gmail.com 
### Correspondig author: [1]
### DOI: ..............

## Resumen

El trabajo analiza la construcción y evaluación de modelos predictivos para estimar el rendimiento logístico regional a partir de datos socioeconómicos. Basado en el trabajo previo [@Tapia2023], que proponía un modelo de regresión lineal utilizando el Logistics Performance Index (LPI) y el PBI per cápita de la población económicamente activa (PBIPEA), este estudio amplía el análisis incorporando métodos de analítica de datos: árboles de decisión y redes neuronales. Para ello se conforma una base de datos con información internacional proveniente del World Bank, Enterprise Survey, Transparencia Internacional, FactbookCIA y el World Economic Forum. Se realiza un análisis exploratorio, correlacional y de componentes principales, seguido de técnicas de clustering (Clara, Agnes y Ward) para evaluar la reproducibilidad de los grupos definidos en [@Tapia2023]. Posteriormente se entrenan modelos predictivos, destacándose una alta precisión del modelo de árboles de decisión (89%) en la clasificación de grupos y un buen rendimiento del modelo de redes neuronales para la predicción del LPI (correlación del 82%). Finalmente, se estima el rendimiento logístico de las regiones de Mendoza mediante estos modelos y se comparan las predicciones con los valores obtenidos originalmente por regresiones lineales, verificándose una correlación aceptable entre ambos enfoques.

Palabras claves: LPI, predicción, modelos.

## Introducción

En el estudio de la logística y las cadenas de abastecimiento a nivel regional existe una problemática que es la caracterización de esta por medio de indicadores. Si se buscan datos sobre rendimientos logísticos regionales no se encuentra información relevante sobre el tema [@Tapia2023].  A nivel mundial se obtiene una referencia por medio del Logistics Performance Index (LPI), que es un indicador logístico por países. 

En [@Tapia2023] se desarrolló un modelo predictivo para determinar el rendimiento logístico regional a un bajo costo, a través de la relación entre parámetros socioeconómicos regionales y el Logistics Performance Index (LPI). La metodología de la investigación fue la de generar en primer lugar una base de datos socio-económicos de organismos internacionales. 

El análisis de los datos y el planteo del modelo se realizaron con ayuda de herramientas informáticas de análisis estadístico. Con los datos obtenidos en el estudio descriptivo se verificó la correlación de las variables planteadas. Se realizó un análisis exploratorio con planilla de cálculo y posteriormente se utilizó el software libre “R” para confirmar el análisis exploratorio y conformar un modelo de relación entre el LPI y los indicadores socioeconómicos. Se trató de establecer relaciones entre variables sin precisar sentido de causalidad. Las variables estudiadas son: LPI vs PBI per cápita de la población económicamente activa. Con lo cual se realizó un modelo predictivo por medio de regresiones lineales según actividades económicas. Para finalizar se realizó una aplicación a la provincia de Mendoza, donde se comparó el valor obtenido por el modelo predictivo y valores obtenidos de un estudio realizado en Mendoza [@Tapia2020].

Posteriormente se estimaron los valores del rendimiento para los distintos departamentos. Así, se estima que Mendoza tiene un rendimiento logístico promedio del 60%, pero cada micro región dentro de la provincia tiene sus particularidades que se observan en el trabajo. 

Esta herramienta de bajo costo permite predecir el rendimiento logístico en distintas regiones, lo que ayuda a comprender el comportamiento logístico de las mismas. Como aplicación directa se podría determinar a través del rendimiento logístico y a nivel de prefactibilidad las necesidades de inversión en aspectos logísticos, como por ejemplo en infraestructuras. 

En este trabajo se plantea como objetivo determinar la fiabilidad del modelo planteado en [@Tapia2023] comparándolo con otros métodos de la analítica de datos como árboles de decisiones y redes neuronales. Finalizando con una aplicación a las regiones de la provincia de Mendoza. 


## Estado del Arte

La construcción de modelos predictivos requiere datos confiables. En logística, uno de los indicadores más robustos a nivel país es el LPI del World Bank (WB), complementado por datos socioeconómicos de otras fuentes internacionales. El LPI, vigente desde 2007, se compone de seis dimensiones vinculadas al desempeño logístico [@Arvis2018] y se basa en encuestas a actores del transporte y la carga, lo cual lo hace útil pero también susceptible a errores de muestreo e interpretación. Aunque es la base de datos logística más completa, presenta limitaciones relacionadas con la experiencia de los encuestados y particularidades de países sin litoral marítimo o pequeños estados insulares [@Arvis2018].

A nivel global persisten brechas significativas en los puntajes del LPI entre países según nivel de ingresos, aunque algunos de ingresos medios superan a sus pares, lo que evidencia que el ingreso no explica completamente el desempeño logístico [@Arvis2018]. Estudios sostienen que el rendimiento logístico está estrechamente vinculado con el desarrollo económico, pero también influido por factores políticos [@Bizoi2014]. Asimismo, existe evidencia de la incidencia directa de la infraestructura, la política económica y la flexibilidad logística en el crecimiento nacional [@Navickas2011].

Investigaciones con amplias muestras de países muestran que la calidad de la infraestructura ferroviaria y portuaria es determinante del LPI (Khan et al., 2017), y que aduanas e infraestructura son los factores más relevantes en la relación entre LPI y PBI [@Uca2015]. También se ha demostrado que el LPI media la relación entre el Índice de Percepción de la Corrupción y el comercio exterior, reforzando su rol en la competitividad [@Civelek2015]. Sorprendentemente, indicadores sociales muestran una relación más estrecha con el desempeño logístico que los económicos, cuestionando la idea de que mayores inversiones garantizan mejores resultados [@Guner2012].

Otras investigaciones señalan que el LPI tiene un efecto moderador y mediador en la relación entre competitividad (GCI), PIB y desempeño logístico, confirmando que el LPI es un buen predictor del rendimiento económico [@Cemberci2015 ; @Daleo2015]. No obstante, algunos autores critican la metodología del WB, proponiendo ponderaciones diferenciadas de los componentes del LPI mediante el método BWM. Estas investigaciones otorgan mayor peso relativo a la infraestructura (0.24) y menor al seguimiento y rastreo (0.10), mostrando discrepancias con la ponderación uniforme actual [@Rezaei2018].
Finalmente, además del LPI, existen otros indicadores relevantes, como los provistos por el World Economic Forum, que incluyen métricas de infraestructura y desempeño de proveedores [@WEForum2018].


## Materiales y métodos

La metodología es no experimental transversal correlacional la cual consta de tres partes: conformación de base de datos, análisis y planteo de modelos. La conformación de la base de datos se realizó tomando la base de datos ocupada en [@Tapia2023] y completándola con los datos obtenidos de esa investigación. Esta base de dato había sido desarrollada con datos de la web proveniente de la información publicada por diferentes organismos internacionales (World Bank, Enterprise Survey WB, FactbookCia, Transparency International y World Economic Forum) [@Tapia2021]. 

El modelo predictivo determinó 8 grupos (Grupo0, Grupo1, Grupo2, Grupo3, Grupo4, Grupo5, GrupoNC, GrupoRN). Cada uno caracterizados por relaciones de PBIPEA y actividades económicas. Los datos se observan en el archivo que conforma el dataset (adjunto:Datos_CursoAD_completo_1.xls ).

```{r}
library(readxl)

Datos_CursoAD_completo_1 <- read_excel("Datos_CursoAD_completo_1.xls")

```


Para los grupos: 1; 2; 3; 4; 5 y RN se realizó un modelo de regresión lineal para predecir valores de rendimiento logístico. Los países que no pudieron clasificarse en los diferentes grupos, se los agrupó en el Grupo0 (PBIPEA<7000) y en el GrupoNC (NOC). En la siguiente figura se observan las diferentes regresiones. 


```{r, fig.cap="Regresiones lineales por grupos, extraído [@Tapia2021]", out.width="80%", fig.align="center"}
library (knitr)
knitr::include_graphics ("Regresiones.png")
```

Para esta investigación se utilizará el software R, y los métodos KNN, árboles de decisiones y redes neuronales. Se compararán los valores de las predicciones para determinar la fiabilidad de los distintos métodos. 

Además, se predecirán los valores de rendimiento logístico de las regiones de Mendoza, para lo cual se utilizará la siguiente base de datos. Para esta aplicación se recurre a los datos estadísticos del 2019 de la DEIE (Dirección de Estadísticas e Investigaciones económicas de Mendoza) para obtener los valores del Producto Bruto Geográfico (PBG), equivalente al PBI circunscripto al estudio de una región de un país. En esta base de datos se puede observar un resumen del PBG y su incidencia en las distintas actividades económicas, que es lo que demanda el modelo desarrollado [@Tapia2023]. Además, se considera la PEA, para calcular el coeficiente PBGPEA equivalente al PBIPEA. De esta manera se determinó cuáles son las regresiones que se deben utilizar para determinar el LPI. En el dataset correspondiente se observan los valores característicos de la región de Mendoza, al grupo que se determinó que pertenecían y las predicciones de los valores de LPI (adjunto: Datos_Mza_1.xls)  

```{r}
Datos_Mza_1 <- read_excel("Datos_Mza_1.xls")
```


## Desarrollo

### Análisis exploratorio

A continuación se procederá a la conformación de la base de datos para realizar el análisis exploratorio. Para que sea equievalente al planteado en [@Tapia2023] se procederá a eliminar las filas que pertenezcan a los GrupoNC y Grupo0

```{r}
library(dplyr)

Datos_CursoAD_equivalente <- Datos_CursoAD_completo_1 %>% 
  filter(!Grupos %in% c("GrupoNC", "Grupo0"))
```


```{r}
Datos_CursoAD_1 <- Datos_CursoAD_equivalente [ ,c(3,4,5,6,7,8,9,10,11,12,13,14,15)]

```

#### Relaciones entre variables

```{r}
library (car)
scatterplotMatrix(Datos_CursoAD_1)
```

#### Correlaciones entre variables

```{r}
library(corrplot)
M <- cor (Datos_CursoAD_1)
corrplot(M)
```


```{r}

library(psych)
corPlot(Datos_CursoAD_1)
```

Se observa las mayores correlaciones para el LPI con las variables: PBIPEA, Agr, Exp_Merc, RRNN y Exp_H_Tech.


#### Matriz de covarianza 

```{r}
library(scatterPlotMatrix)
scatterPlotMatrix(Datos_CursoAD_1)
```



#### Determinación de componentes principales



```{r}
mins <- sapply(Datos_CursoAD_1, min)
maxs <- sapply(Datos_CursoAD_1, max)

```

```{r}
normalize <- function(x, min_val, max_val){
  (x - min_val) / (max_val - min_val)
}

Datos_CursoAD_1_norm <- as.data.frame(
  mapply(function(x, mn, mx) normalize(x, mn, mx),
         Datos_CursoAD_1, mins, maxs)
)

```




```{r}
PC1 <- princomp (Datos_CursoAD_1_norm)
PC1
```



```{r}
plot(PC1)
```

```{r}
biplot(PC1)
```

```{r}
acp2 <-PC1$scores[ ,1:2]
plot(acp2)
```

#### Estudio de clústers

a- Agnes

```{r}
library(cluster)
agp3 = agnes(acp2,method="average")
plot(agp3)
```

Se estudiarán la cantidad de 6 clústers que son los grupos determinados en el estudio de base.


Estudio por componentes principales

```{r}
agpcut <- cutree(agp3,6)
par(mfrow=c(1,1))
plot(acp2,col=agpcut)
```

b- Clara

```{r}
library(cluster)
plot(clara(Datos_CursoAD_1,6))
```

Se agregarán los números de clústers al dataset inicial

```{r}
modelo <- clara(Datos_CursoAD_1, k = 6)
modelo$clustering
```

```{r}
clusters <- split(1:nrow(Datos_CursoAD_equivalente), modelo$clustering)
clusters
```

```{r}
Datos_CursoAD_equivalente$cluster <- modelo$clustering

```
Se observa que la clasificación de clústers utilizada por el método Clara no es comparable con la clasificación en la fuente [@Tapia2023]

c- Ward

Se utilizará el método Ward, que es el que se utilizó en [@Tapia2023]

```{r}
# 1. Escalar datos numéricos
Datos_CursoAD_1scaled <- scale(Datos_CursoAD_1)

# 2. Calcular distancia euclidiana
dist_euclid <- dist(Datos_CursoAD_1scaled, method = "euclidean")

# 3. Clustering jerárquico con método Ward
hc_ward <- hclust(dist_euclid, method = "ward.D2")

# 4. Graficar dendrograma
plot(hc_ward, 
     main = "Clustering Jerárquico - Método Ward (D2)",
     xlab = "",
     ylab = "Altura",
     sub = "")

# 5. Cortar el árbol en k clusters (ej: 3 clusters)
modelo2 <- cutree(hc_ward, k = 6)

# 6. Agregar la clasificación al dataset
Datos_CursoAD_cluster <- as.factor(modelo2)

# Ver clusters
table(Datos_CursoAD_cluster)
modelo2
```


Se agregarán los números de clústers al dataset inicial



```{r}
clusters2 <- split(1:nrow(Datos_CursoAD_equivalente), modelo2)
clusters2

```

```{r}
Datos_CursoAD_equivalente$cluster2 <- modelo2

```


```{r}
library(openxlsx)

write.xlsx(Datos_CursoAD_equivalente, "Datos_CursoAD_equivalente.xlsx")

```

De las dos maneras de obtener clústers no se observa demasiada conincidencia con lo planteado en [@Tapia2023]


## Modelos predictivos


### Árboles de decisiones

```{r}
library(rpart)
library(rpart.plot)   # para graficar el árbol
library (car)
library (party)

```

```{r}
Datos_CursoAD_Tree <- Datos_CursoAD_equivalente [ ,c(3,4,5,6,7,8,9,10,11,12,13,14,15,16)]

Datos_CursoAD_Tree$Grupos <- as.factor(Datos_CursoAD_Tree$Grupos)


```

Clasificación utilizando LPI y otro tipo de algoritmo para el árbol. 


```{r}
arbol <- rpart(Grupos ~ ., 
               data = Datos_CursoAD_Tree, 
               method = "class")   # clasificación

```


```{r}
rpart.plot(arbol, type = 2, extra = 104, fallen.leaves = TRUE)

```


```{r}
pred <- predict(arbol, Datos_CursoAD_Tree, type = "class")

table(Predicción = pred, Real = Datos_CursoAD_Tree$Grupos)


```

Se observa una matriz de confusión con una diagonal principal dominante. Con la siguiente efectividad de predicción. 

```{r}
mean(pred == Datos_CursoAD_Tree$Grupos)

```


```{r}
pred1 <- predict(arbol, Datos_Mza_1 [ , c (2,3,4,5,6,7,8,9,10,11,12,13,14)], type = "class")
pred1
```



```{r}
Mza2 <- split(1:nrow(Datos_Mza_1), pred1)
Mza2
```


```{r}
Datos_Mza_1$Mza2 <- pred1

write.xlsx(Datos_Mza_1, "Datos_Mza_1.xlsx")

```


Comparando los resultados del modelo predictivo de Grupos y la clasificación hecha en [@Tapia2023] se observa una equivalencia del 89,47%.


### Redes Neuronales

Se realizará una Red Neuronal para predecir los valores de LPI y compararlos con las predicciones de [@Tapia2023] para Mendoza.

Primero se realiza un proceso de normalización. 

```{r}
mins <- sapply(Datos_CursoAD_1, min)
maxs <- sapply(Datos_CursoAD_1, max)

```

```{r}
normalize <- function(x, min_val, max_val){
  (x - min_val) / (max_val - min_val)
}

Datos_CursoAD_1_norm <- as.data.frame(
  mapply(function(x, mn, mx) normalize(x, mn, mx),
         Datos_CursoAD_1, mins, maxs)
)

```


Segundo se divide el dataset en una muestra de entrenamiento y una muestra para testeo. 

```{r}
indice <- sample(2, nrow(Datos_CursoAD_1_norm), replace = TRUE, prob = c(0.7,0.3))
LPI_train <- Datos_CursoAD_1_norm [indice==1,]
LPI_test  <- Datos_CursoAD_1_norm [indice==2,]

```

Modelo predictivo de red neuronal. 

```{r}
library(neuralnet)

LPI_model <- neuralnet(LPI ~ PBIPEA + Agr + Ind + Comercio + Exp_Mer + Exp_ByS + Exp_Comb + Exp_MM + Prod_oil + RRNN + Tierras_Agr + Exp_H_Tech , data = LPI_train, hidden = c(2,1))

str(LPI_model)
```


```{r}
library(NeuralNetTools)

plotnet(LPI_model, 
        alpha = 0.7,
        node_labs = TRUE,
        y_names = "LPI_pred",
        circle_cex = 5,
        cex_val = 0.6)

```

Se comprueba el nivel de eficiencia del modelo con respeto al set de testeo

```{r}
model_results <- compute(LPI_model,LPI_test[1:13])
predicted_LPI <- model_results$net.result
```

```{r}
cor(predicted_LPI,LPI_test$LPI)
```

El nivel de correlación del testeo es del 86%

A continuación, se realiza la predicción de los valores para Mendoza.


Base de datos y normalización equivalente al set de datos originales

```{r}
Mza_test<- Datos_Mza_1 [ ,c(2,3,4,5,6,7,8,9,10,11,12,13,14)]
Mza_test_norm <- as.data.frame(
  mapply(function(x, mn, mx) normalize(x, mn, mx),
         Mza_test, mins, maxs)
)

```

Predicciones de Mendoza

```{r}
Mza_results <- compute(LPI_model,Mza_test_norm [1:12])
Mza_LPI_nomr <- Mza_results$net.result

```


```{r}
Mza_LPI <- Mza_LPI_nomr * (maxs["LPI"] - mins["LPI"]) + mins["LPI"]
Mza_LPI

```

Comparación de correlación entre los valores determinados por la red neuronal y el método de regresiones lineales observados en [@Tapia2023]

```{r}
cor(Mza_LPI,Datos_Mza_1$LPI)
```


```{r}
Mza3 <- split(1:nrow(Datos_Mza_1), Mza_LPI)

```


```{r}
Datos_Mza_1$Mza3 <- Mza_LPI

write.xlsx(Datos_Mza_1, "Datos_Mza_1.xlsx")
```


## Discución de Resultados

### Clasificación por grupos

#### a. Clasificación por medio de Clústers 
        
No se observan demasiadas similitudes entre los grupos determinados en [@Tapia2023] y los obtenidos con los métodos de clústers utilizados en esta investigación. 

#### b. Clasificación de grupos aplicados a Mendoza

Cuando se realiza este tipo de clasificación según la base de datos original, utilizando los Grupos preclasificados. Se utiliza un método predictivo por medio de árboles. Al comparar los resultados del método predictivo y lo determinado para Mendoza en el trabajo original, se obtiene una efectividad del 89% de los casos. 
        
Esta es evidencia de que el método de clasificación por grupos utilizado en  [@Tapia2023] tiene una efectividad de casi el 90%. 
      
### Modelos predictivo de LPI

El desarrollo del modelo predictivo basado en Redes Neuronales presenta un buen coefiente de correlación del 82%. Comparable con el rango de valores de eficiencia de las regresiones lineales presentados en [@Tapia2023], ver figura siguiente. 
        

```{r fig.cap="Figura 1 – Eficiencia de Regresiones lineales por grupos, extraído [@Tapia2021]", out.width="50%", fig.align="center"}
library (knitr)
knitr::include_graphics ("Test-regresiones.png")

```

Si se compara la predicción para Mendoza con  redes neuronales y con el modelo de regresiones lineales, se observa una correlación aceptable de 0,72. La ventaja del modelo con redes neuronales tiene la ventaja de que no necesita una clasificación por grupos. 


## Conclusiones

El estudio presentado constituye un aporte significativo al análisis y predicción del rendimiento logístico regional, especialmente en contextos donde la información directa es escasa o inexistente. En primer lugar, queda demostrada la relevancia del LPI como indicador sintético y robusto a nivel internacional, así como la pertinencia de utilizar variables socioeconómicas para construir aproximaciones predictivas de bajo costo. La base de datos utilizada y ampliada en esta investigación permite establecer relaciones valiosas entre características económicas estructurales y desempeño logístico, generando un marco adecuado para la comparación de diversos métodos de analítica de datos.

En relación con los métodos predictivos, el análisis evidencia diferencias sustantivas entre las técnicas aplicadas. Los métodos de clustering —tanto por Clara como por Agnes y Ward— mostraron dificultades para reproducir los grupos previamente establecidos en [@Tapia2023]. Esto sugiere que la clasificación original depende de criterios específicos relacionados con las actividades económicas y la estructura productiva de los países, criterios que no emergen de manera espontánea mediante algoritmos de agrupamiento no supervisado. Sin embargo, al aplicar un proceso supervisado para la clasificación de grupos, el árbol de decisión obtuvo una precisión del 89%, lo que indica que los patrones presentes en la clasificación original pueden ser capturados adecuadamente cuando la técnica incorpora información previa.

El modelo de redes neuronales mostró también resultados prometedores. Con una correlación del 82% al evaluar el conjunto de testeo, se evidencia que este tipo de modelos tiene capacidad para aprender relaciones no lineales entre las variables socioeconómicas y el LPI, superando en flexibilidad a los modelos lineales tradicionales. Más aún, al comparar las predicciones para Mendoza con las estimaciones obtenidas mediante el método de regresiones lineales, se observó una correlación aceptable de 0,72. Este resultado confirma que las redes neuronales pueden ser una herramienta complementaria —e incluso alternativa— para la predicción del rendimiento logístico sin la necesidad de clasificar previamente a las regiones en grupos.

Desde una perspectiva aplicada, este trabajo demuestra la utilidad de los métodos de analítica de datos en el diseño de herramientas predictivas para la planificación logística regional. La posibilidad de estimar el rendimiento logístico con información disponible públicamente facilita la toma de decisiones en políticas públicas, especialmente en territorios donde no existen mediciones estandarizadas. Además, la comparación de métodos permite identificar fortalezas y limitaciones de cada enfoque: las regresiones lineales ofrecen interpretabilidad y simplicidad; los árboles de decisión aportan claridad en la clasificación; las redes neuronales permiten capturar relaciones complejas entre múltiples factores.

Finalmente, el análisis realizado para las regiones de Mendoza muestra el potencial del enfoque predictivo para aplicaciones territoriales concretas. La identificación de variaciones en el rendimiento logístico entre departamentos aporta información estratégica para orientar inversiones en infraestructura, optimizar la planificación y evaluar desigualdades territoriales. En conjunto, el estudio confirma que la combinación de datos socioeconómicos e inteligencia artificial constituye una herramienta sólida y eficaz para estimar indicadores logísticos y mejorar la comprensión del sistema productivo y territorial.


## Referencias

```{r}
# Referencias
```


